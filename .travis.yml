language: node_js

sudo: required

addons:
  apt:
    packages:
      - net-tools

node_js:
  - "8"
  - "10"

branches:
  only:
    - master

services:
  - mongodb
  - docker

install:
  - npm install

before_install:
  - ifconfig
  - netstat -tupnl
  - ip addr
  - cd test
  - docker-compose up -d
  - docker exec -ti opc_ua_test_orion ip addr
  - docker exec -ti opc_ua_test_orion curl http://172.17.0.1:4001/iot/devices
  - npm update -q

before_script:
  #  - npm run lint
  - npm run lint:text
  - npm run lint:md

after_script:
  - npm run test:coveralls
